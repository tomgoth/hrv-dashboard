{"ast":null,"code":"var _jsxFileName = \"/Users/gotht/Documents/PMC/hrv-dashboard/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ReferenceLine } from 'recharts';\nimport axios from \"axios\"; //const data = [{name: 'Page A', uv: 400, pv: 2400, amt: 2400}];\n\nfunction App() {\n  const [data, setData] = useState();\n  const [q25, setQ25] = useState();\n  const [q50, setQ50] = useState();\n  const [q75, setQ75] = useState();\n  useEffect(() => {\n    axios.get('http://localhost:3001/recent').then(response => {\n      let r = response.data.data;\n      setData(r);\n      setQ25(quantile(r.map(datum => datum.rMSSD), .25));\n      setQ50(quantile(r.map(datum => datum.rMSSD), .50));\n      setQ75(quantile(r.map(datum => datum.rMSSD), .75));\n      console.log(response);\n    });\n  }, []);\n\n  const asc = arr => arr.sort((a, b) => a - b);\n\n  const sum = arr => arr.reduce((a, b) => a + b, 0);\n\n  const mean = arr => sum(arr) / arr.length; // sample standard deviation\n\n\n  const std = arr => {\n    const mu = mean(arr);\n    const diffArr = arr.map(a => (a - mu) ** 2);\n    return Math.sqrt(sum(diffArr) / (arr.length - 1));\n  };\n\n  const quantile = (arr, q) => {\n    const sorted = asc(arr);\n    const pos = (sorted.length - 1) * q;\n    const base = Math.floor(pos);\n    const rest = pos - base;\n\n    if (sorted[base + 1] !== undefined) {\n      return sorted[base] + rest * (sorted[base + 1] - sorted[base]);\n    } else {\n      return sorted[base];\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(LineChart, {\n    width: 1000,\n    height: 600,\n    data: data,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Line, {\n    type: \"monotone\",\n    dataKey: \"rMSSD\",\n    stroke: \"#82ca9d\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(CartesianGrid, {\n    stroke: \"#ccc\",\n    strokeDasharray: \"5 5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(ReferenceLine, {\n    y: q25,\n    label: \"25th Quantile\",\n    stroke: \"red\",\n    strokeDasharray: \"3 3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(ReferenceLine, {\n    y: q50,\n    label: \"50th Quantile\",\n    stroke: \"red\",\n    strokeDasharray: \"3 3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(ReferenceLine, {\n    y: q75,\n    label: \"75th Quantile\",\n    stroke: \"red\",\n    strokeDasharray: \"3 3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(XAxis, {\n    dataKey: \"createdAt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(YAxis, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Tooltip, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/gotht/Documents/PMC/hrv-dashboard/src/App.js"],"names":["React","useState","useEffect","LineChart","Line","XAxis","YAxis","CartesianGrid","Tooltip","ReferenceLine","axios","App","data","setData","q25","setQ25","q50","setQ50","q75","setQ75","get","then","response","r","quantile","map","datum","rMSSD","console","log","asc","arr","sort","a","b","sum","reduce","mean","length","std","mu","diffArr","Math","sqrt","q","sorted","pos","base","floor","rest","undefined"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ReferenceLine } from 'recharts';\nimport axios from \"axios\";\n\n//const data = [{name: 'Page A', uv: 400, pv: 2400, amt: 2400}];\n\n\nfunction App() {\n  const [data, setData] = useState();\n\n  const [q25, setQ25] = useState();\n  const [q50, setQ50] = useState();\n  const [q75, setQ75] = useState();\n\n\n  useEffect(() => {\n    axios.get('http://localhost:3001/recent')\n      .then((response) => {\n        let r = response.data.data\n        setData(r);\n        setQ25(quantile(r.map(datum => datum.rMSSD), .25))\n        setQ50(quantile(r.map(datum => datum.rMSSD), .50))\n        setQ75(quantile(r.map(datum => datum.rMSSD), .75))\n        console.log(response)\n    })\n  },[])\n\n\nconst asc = arr => arr.sort((a, b) => a - b);\n\nconst sum = arr => arr.reduce((a, b) => a + b, 0);\n\nconst mean = arr => sum(arr) / arr.length;\n\n// sample standard deviation\nconst std = (arr) => {\n    const mu = mean(arr);\n    const diffArr = arr.map(a => (a - mu) ** 2);\n    return Math.sqrt(sum(diffArr) / (arr.length - 1));\n};\n\nconst quantile = (arr, q) => {\n    const sorted = asc(arr);\n    const pos = (sorted.length - 1) * q;\n    const base = Math.floor(pos);\n    const rest = pos - base;\n    if (sorted[base + 1] !== undefined) {\n        return sorted[base] + rest * (sorted[base + 1] - sorted[base]);\n    } else {\n        return sorted[base];\n    }\n};\n\n  return (\n  <LineChart width={1000} height={600} data={data}>\n    \n    <Line type=\"monotone\" dataKey=\"rMSSD\" stroke=\"#82ca9d\" />\n    <CartesianGrid stroke=\"#ccc\" strokeDasharray=\"5 5\" />\n    <ReferenceLine y={q25} label=\"25th Quantile\" stroke=\"red\" strokeDasharray=\"3 3\" />\n    <ReferenceLine y={q50} label=\"50th Quantile\" stroke=\"red\" strokeDasharray=\"3 3\" />\n    <ReferenceLine y={q75} label=\"75th Quantile\" stroke=\"red\" strokeDasharray=\"3 3\" />\n    <XAxis dataKey=\"createdAt\" />\n    <YAxis />\n    <Tooltip/>\n  </LineChart>\n  )}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}