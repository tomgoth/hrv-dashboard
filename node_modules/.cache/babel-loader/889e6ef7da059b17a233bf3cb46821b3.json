{"ast":null,"code":"var _jsxFileName = \"/Users/gotht/Documents/PMC/hrv-dashboard/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport axios from \"axios\";\nimport { quantile, ln } from './utils/math';\nimport moment from 'moment';\nimport { VictoryLine, VictoryChart, VictoryBrushContainer, VictoryTooltip, createContainer, VictoryLegend } from 'victory';\nimport MultiToggle from 'react-multi-toggle';\nconst domainOptions = [{\n  displayName: \"Day\",\n  value: \"day\"\n}, {\n  displayName: \"Week\",\n  value: \"week\"\n}, {\n  displayName: \"Month\",\n  value: \"month\"\n}, {\n  displayName: \"Year\",\n  value: \"year\"\n}];\nconst VictoryZoomVoronoiContainer = createContainer(\"zoom\", \"voronoi\");\n\nfunction App() {\n  const [data, setData] = useState({\n    rMSSD: [{\n      x: 1,\n      y: 2\n    }],\n    HFPWR: [{\n      x: 1,\n      y: 2\n    }],\n    LFPWR: [{\n      x: 1,\n      y: 2\n    }]\n  });\n  const [selectedDomain, setSelectedDomain] = useState();\n  const [selectedDomainOption, setSelectedDomainOption] = useState(\"week\");\n  useEffect(() => {\n    axios.get('http://localhost:3001/recent').then(response => {\n      let r = response.data.data;\n      let rMSSDArr = r.map(datum => datum.rMSSD);\n      let rMSSDData = r.map(datum => {\n        return {\n          label: `${datum.rMSSD.toFixed(0)}ms @ ${moment(datum.createdAt).format(\"MM/DD hh:mma\")}`,\n          y: datum.rMSSD,\n          x: moment(datum.createdAt).toDate()\n        };\n      });\n      let HFPWRData = r.map(datum => {\n        return {\n          label: `${ln(datum.HFPWR).toFixed(2)} @ ${moment(datum.createdAt).format(\"MM/DD hh:mma\")}`,\n          y: ln(datum.HFPWR),\n          x: moment(datum.createdAt).toDate()\n        };\n      });\n      let LFPWRData = r.map(datum => {\n        return {\n          label: `${ln(datum.LFPWR).toFixed(2)} @ ${moment(datum.createdAt).format(\"MM/DD hh:mma\")}`,\n          y: ln(datum.LFPWR),\n          x: moment(datum.createdAt).toDate()\n        };\n      });\n      let q66Data = [{\n        x: rMSSDData[0].x,\n        y: quantile(rMSSDArr, .66)\n      }, {\n        x: rMSSDData[rMSSDData.length - 1].x,\n        y: quantile(rMSSDArr, .66)\n      }];\n      let q33Data = [{\n        x: rMSSDData[0].x,\n        y: quantile(rMSSDArr, .33)\n      }, {\n        x: rMSSDData[rMSSDData.length - 1].x,\n        y: quantile(rMSSDArr, .33)\n      }];\n      setData({\n        rMSSD: rMSSDData,\n        HFPWR: HFPWRData,\n        LFPWR: LFPWRData,\n        Q66: q66Data,\n        Q33: q33Data\n      });\n      setSelectedDomain(setDomainDuration(\"week\"));\n    });\n  }, []);\n\n  const setDomainDuration = duration => {\n    //day, week, month, year\n    let now = moment().toDate();\n    let prev = moment().subtract(1, duration).toDate();\n    return {\n      x: [prev, now]\n    };\n  };\n\n  const handleZoom = domain => {\n    setSelectedDomain({\n      x: domain.x\n    }); //set only the x domain\n  };\n\n  const handleDomainOption = option => {\n    setSelectedDomainOption(option);\n    setSelectedDomain(setDomainDuration(option));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(MultiToggle, {\n    options: domainOptions,\n    selectedOption: selectedDomainOption,\n    onSelectOption: handleDomainOption,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(VictoryChart, {\n    width: 1000,\n    height: 700,\n    scale: {\n      x: \"time\"\n    },\n    containerComponent: /*#__PURE__*/React.createElement(VictoryZoomVoronoiContainer, {\n      responsive: false,\n      zoomDimension: \"x\",\n      zoomDomain: selectedDomain,\n      onZoomDomainChange: handleZoom,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(VictoryLegend, {\n    x: 400,\n    y: 50,\n    title: \"HRV Time Domain\",\n    centerTitle: true,\n    orientation: \"horizontal\",\n    gutter: 20,\n    style: {\n      border: {\n        stroke: \"black\"\n      },\n      title: {\n        fontSize: 20\n      }\n    },\n    data: [{\n      name: \"rMSSD\",\n      symbol: {\n        fill: \"#20b2aa\"\n      }\n    }, {\n      name: \"67th / 33rd Percentile\",\n      symbol: {\n        fill: \"ff665e\"\n      }\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(VictoryLine, {\n    style: {\n      data: {\n        stroke: \"#20b2aa\"\n      }\n    },\n    interpolation: \"monotoneX\",\n    data: data.rMSSD,\n    labelComponent: /*#__PURE__*/React.createElement(VictoryTooltip, {\n      activateData: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 33\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(VictoryLine, {\n    style: {\n      data: {\n        stroke: \"#ff665e\",\n        strokeWidth: .5\n      }\n    },\n    data: data.Q66,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(VictoryLine, {\n    style: {\n      data: {\n        stroke: \"#ff665e\",\n        strokeWidth: .5\n      }\n    },\n    data: data.Q33,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(VictoryChart, {\n    padding: {\n      top: 0,\n      left: 50,\n      right: 50,\n      bottom: 30\n    },\n    width: 1000,\n    height: 100,\n    scale: {\n      x: \"time\"\n    },\n    containerComponent: /*#__PURE__*/React.createElement(VictoryBrushContainer, {\n      responsive: false,\n      brushDimension: \"x\",\n      brushDomain: selectedDomain,\n      onBrushDomainChange: handleZoom,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(VictoryLine, {\n    style: {\n      data: {\n        stroke: \"#493924\"\n      }\n    },\n    data: data.rMSSD,\n    interpolation: \"monotoneX\",\n    labelComponent: /*#__PURE__*/React.createElement(VictoryTooltip, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 33\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(VictoryChart, {\n    width: 1000,\n    height: 700,\n    scale: {\n      x: \"time\"\n    },\n    containerComponent: /*#__PURE__*/React.createElement(VictoryZoomVoronoiContainer, {\n      responsive: false,\n      zoomDimension: \"x\",\n      zoomDomain: selectedDomain,\n      onZoomDomainChange: handleZoom,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(VictoryLegend, {\n    x: 400,\n    y: 50,\n    title: \"HRV Frequency Domain\",\n    centerTitle: true,\n    orientation: \"horizontal\",\n    gutter: 20,\n    style: {\n      border: {\n        stroke: \"black\"\n      },\n      title: {\n        fontSize: 20\n      }\n    },\n    data: [{\n      name: \"LN High Frequency Power\",\n      symbol: {\n        fill: \"#20b2aa\"\n      }\n    }, {\n      name: \"LN Low Frequency Power\",\n      symbol: {\n        fill: \"ff665e\"\n      }\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(VictoryLine, {\n    style: {\n      data: {\n        stroke: \"#20b2aa\"\n      }\n    },\n    interpolation: \"monotoneX\",\n    data: data.HFPWR,\n    labelComponent: /*#__PURE__*/React.createElement(VictoryTooltip, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 33\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(VictoryLine, {\n    style: {\n      data: {\n        stroke: \"#ff665e\"\n      }\n    },\n    interpolation: \"monotoneX\",\n    data: data.LFPWR,\n    labelComponent: /*#__PURE__*/React.createElement(VictoryTooltip, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 33\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 16\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/gotht/Documents/PMC/hrv-dashboard/src/App.js"],"names":["React","useState","useEffect","axios","quantile","ln","moment","VictoryLine","VictoryChart","VictoryBrushContainer","VictoryTooltip","createContainer","VictoryLegend","MultiToggle","domainOptions","displayName","value","VictoryZoomVoronoiContainer","App","data","setData","rMSSD","x","y","HFPWR","LFPWR","selectedDomain","setSelectedDomain","selectedDomainOption","setSelectedDomainOption","get","then","response","r","rMSSDArr","map","datum","rMSSDData","label","toFixed","createdAt","format","toDate","HFPWRData","LFPWRData","q66Data","length","q33Data","Q66","Q33","setDomainDuration","duration","now","prev","subtract","handleZoom","domain","handleDomainOption","option","border","stroke","title","fontSize","name","symbol","fill","strokeWidth","top","left","right","bottom"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport './App.css'\nimport axios from \"axios\"\nimport { quantile, ln } from './utils/math'\nimport moment from 'moment'\nimport {VictoryLine, VictoryChart, VictoryBrushContainer, VictoryTooltip, createContainer, VictoryLegend} from 'victory'\nimport MultiToggle from 'react-multi-toggle'\n\nconst domainOptions = [{displayName: \"Day\", value: \"day\"}, {displayName: \"Week\", value: \"week\"}, {displayName: \"Month\", value: \"month\"}, {displayName: \"Year\", value: \"year\"}]\n\nconst VictoryZoomVoronoiContainer = createContainer(\"zoom\", \"voronoi\");\n\nfunction App() {\n  const [data, setData] = useState({rMSSD: [{x: 1, y:2}], HFPWR: [{x: 1, y:2}], LFPWR: [{x: 1, y:2}]});\n  const [selectedDomain, setSelectedDomain] = useState();\n  const [selectedDomainOption, setSelectedDomainOption] = useState(\"week\");\n\n\n\n  useEffect(() => {\n    axios.get('http://localhost:3001/recent')\n      .then((response) => {\n        let r = response.data.data\n        let rMSSDArr = r.map(datum => datum.rMSSD)\n        let rMSSDData = r.map(datum => { return {label: `${datum.rMSSD.toFixed(0)}ms @ ${moment(datum.createdAt).format(\"MM/DD hh:mma\")}` , y: datum.rMSSD, x: moment(datum.createdAt).toDate()} })\n        let HFPWRData = r.map(datum => { return {label: `${ln(datum.HFPWR).toFixed(2)} @ ${moment(datum.createdAt).format(\"MM/DD hh:mma\")}` , y: ln(datum.HFPWR), x: moment(datum.createdAt).toDate()} })\n        let LFPWRData = r.map(datum => { return {label: `${ln(datum.LFPWR).toFixed(2)} @ ${moment(datum.createdAt).format(\"MM/DD hh:mma\")}` , y: ln(datum.LFPWR), x: moment(datum.createdAt).toDate()} })\n        let q66Data = [{x: rMSSDData[0].x, y: quantile(rMSSDArr, .66)}, {x: rMSSDData[rMSSDData.length - 1].x, y: quantile(rMSSDArr, .66)}]\n        let q33Data = [{x: rMSSDData[0].x, y: quantile(rMSSDArr, .33)}, {x: rMSSDData[rMSSDData.length - 1].x, y: quantile(rMSSDArr, .33)}]\n\n        setData({rMSSD: rMSSDData, HFPWR: HFPWRData, LFPWR: LFPWRData, Q66: q66Data, Q33: q33Data});\n        setSelectedDomain(setDomainDuration(\"week\"))\n    \n    })\n  },[])\n\n  const setDomainDuration = (duration) => { //day, week, month, year\n    let now = moment().toDate();\n    let prev = moment().subtract(1, duration).toDate();\n    return {x: [prev, now]}\n  }\n\n  const handleZoom = (domain) => {\n    setSelectedDomain({x: domain.x}) //set only the x domain\n  }\n\n  const handleDomainOption = (option) => {\n    setSelectedDomainOption(option)\n    setSelectedDomain(setDomainDuration(option))\n  }\n\nreturn (\n      \n        <div>\n            <MultiToggle\n              options={domainOptions}\n              selectedOption={selectedDomainOption}\n              onSelectOption={handleDomainOption}\n          />\n            <VictoryChart width={1000} height={700} scale={{x: \"time\"}}\n              containerComponent={\n                <VictoryZoomVoronoiContainer responsive={false}\n                  zoomDimension=\"x\"\n                  zoomDomain={selectedDomain}\n                  onZoomDomainChange={handleZoom}\n                />\n              }\n            >\n              <VictoryLegend x={400} y={50}\n                title=\"HRV Time Domain\"\n                centerTitle\n                orientation=\"horizontal\"\n                gutter={20}\n                style={{ border: { stroke: \"black\" }, title: {fontSize: 20 } }}\n                data={[\n                  { name: \"rMSSD\", symbol: { fill: \"#20b2aa\"} },\n                  { name: \"67th / 33rd Percentile\", symbol: { fill: \"ff665e\" } }\n                ]}\n              />\n              <VictoryLine\n                style={{\n                  data: {stroke: \"#20b2aa\"}\n                }}\n                interpolation=\"monotoneX\"\n                data={data.rMSSD}\n                labelComponent={<VictoryTooltip activateData={true}/>}\n              />\n              \n              <VictoryLine\n                style={{\n                  data: {stroke: \"#ff665e\",\n                        strokeWidth: .5}\n                }}\n                data={data.Q66}\n              />\n              <VictoryLine\n                style={{\n                  data: {stroke: \"#ff665e\",\n                        strokeWidth: .5}\n                }}\n                data={data.Q33}\n              />\n  \n            </VictoryChart>\n  \n            <VictoryChart\n              padding={{top: 0, left: 50, right: 50, bottom: 30}}\n              width={1000} height={100} scale={{x: \"time\"}}\n              containerComponent={\n                <VictoryBrushContainer responsive={false}\n                  brushDimension=\"x\"\n                  brushDomain={selectedDomain}\n                  onBrushDomainChange={handleZoom}\n                />\n              }\n            >\n              \n              <VictoryLine\n                style={{\n                  data: {stroke: \"#493924\"}\n                }}\n                data={data.rMSSD}\n                interpolation=\"monotoneX\"\n                labelComponent={<VictoryTooltip/>}\n              />\n            </VictoryChart>\n\n            <VictoryChart width={1000} height={700} scale={{x: \"time\"}}\n              containerComponent={\n                <VictoryZoomVoronoiContainer responsive={false}\n                  zoomDimension=\"x\"\n                  zoomDomain={selectedDomain}\n                  onZoomDomainChange={handleZoom}\n                />\n              }\n            >\n              <VictoryLegend x={400} y={50}\n                title=\"HRV Frequency Domain\"\n                centerTitle\n                orientation=\"horizontal\"\n                gutter={20}\n                style={{ border: { stroke: \"black\" }, title: {fontSize: 20 } }}\n                data={[\n                  { name: \"LN High Frequency Power\", symbol: { fill: \"#20b2aa\" } },\n                  { name: \"LN Low Frequency Power\", symbol: { fill: \"ff665e\" } }\n                ]}\n              />\n              <VictoryLine\n                style={{\n                  data: {stroke: \"#20b2aa\"}\n                }}\n                interpolation=\"monotoneX\"\n                data={data.HFPWR}\n                labelComponent={<VictoryTooltip/>}\n              />\n               <VictoryLine\n                style={{\n                  data: {stroke: \"#ff665e\"}\n                }}\n                interpolation=\"monotoneX\"\n                data={data.LFPWR}\n                labelComponent={<VictoryTooltip/>}\n              />\n            </VictoryChart >\n        </div>)\n  }\n  \n\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}